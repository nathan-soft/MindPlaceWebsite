@page
@model MindPlaceClient.Pages.ProfessionalsModel
@{
    ViewData["Title"] = "Therapist";
}

<section class="companies-info">
    <div class="container">
        <div class="company-title">
            <h3>Professionals</h3>
        </div>
        <div class="companies-list">
            <div class="row">

                @if (Model.Professionals.Any())
                {
                    foreach (var professional in Model.Professionals)
                    {
                        //check that the professional isn't following the current use and the current user hasn't subscribed to the professional
                        if (!professional.Following.Any(u => u.Username == User.GetLoggedOnUsername()) 
                                        && !professional.Followers.Any(u => u.Username == User.GetLoggedOnUsername()))
                        {
                            //Show the professional
                            <div class="col-lg-3 col-md-4 col-sm-6">
                                <div id="prof_@professional.UserName" class="company_profile_info">
                                    <div class="company-up-info">
                                        <img src="~/assets/img/user1.png" alt="">
                                        <h3>@($"{professional.FirstName} {professional.LastName}")</h3>

                                        <ul>
                                            <li>
                                                <a href="#" title="subscribe" class="follow">Subscribe</a>
                                            </li>
                                        </ul>
                                    </div>
                                    <a href="#" class="view-more-pro">
                                        View Profile
                                        <div class="card custom-tooltip shadow align-items-center">
                                            <div class="image-Wrapper">
                                                <img class="rounded-circle" src="~/assets/img/user1.png" alt="">
                                            </div>
                                            <div class="user-info flex-column justify-content-center">
                                                <h4 class="card-title d-flex flex-wrap mb-2">
                                                    @($"{professional.FirstName} {professional.LastName}")
                                                </h4>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        }

                    }
                }
                else
                {
                    <h3 class="align-middle text-black-50 text-center col-12">No Professional Found.</h3>
                }

                @*Used in javascript*@
                <form method="post" class="d-none"></form>
            </div>
        </div>
        <div class="process-comm d-none">
            <div class="spinner">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
            </div>
        </div>
    </div>
</section>

